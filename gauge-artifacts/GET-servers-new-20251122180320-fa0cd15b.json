{
  "label": "GET /servers/new",
  "captured_at": "2025-11-22T18:03:20Z",
  "preview": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Create New Server - Viewer</title>\n\n    <!-- Bootstrap CSS -->\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <!-- Custom CSS -->\n    <link href=\"/static/custom.css\" rel=\"stylesheet\">\n\n    <!-- Font Awesome for icons -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n        <div class=\"container\">\n            <div class=\"viewer-menu dropdown\">\n                <div class=\"btn-group viewer-menu-group\" role=\"group\">\n                    <a class=\"navbar-brand fw-bold viewer-menu-home\" href=\"/\">\n                        <i class=\"fas fa-shield-alt me-2\"></i>Viewer\n                    </a>\n                    <button\n                        class=\"btn btn-link dropdown-toggle dropdown-toggle-split viewer-menu-toggle\"\n                        type=\"button\"\n                        id=\"viewerMenuToggle\"\n              ",
  "request": {
    "method": "GET",
    "path": "/servers/new?",
    "url": "http://localhost/servers/new",
    "headers": [
      {
        "name": "User-Agent",
        "value": "Werkzeug/3.1.3"
      },
      {
        "name": "Host",
        "value": "localhost"
      },
      {
        "name": "Cookie",
        "value": "session=eyJfcGVybWFuZW50Ijp0cnVlLCJjc3JmX3Rva2VuIjoiOTIzOWM2ODA4YzI4ZjFhNzRkYzg1ZDViYTk3YTM2NDM3OTJhZTZhZSJ9.aSH65w.xHBl76xXoGmYT0PSCSWBu9UA_98"
      }
    ],
    "query": {},
    "body": {
      "encoding": "utf-8",
      "text": ""
    }
  },
  "response": {
    "status_code": 200,
    "mimetype": "text/html",
    "headers": [
      {
        "name": "Content-Type",
        "value": "text/html; charset=utf-8"
      },
      {
        "name": "Content-Length",
        "value": "30480"
      },
      {
        "name": "Vary",
        "value": "Cookie"
      },
      {
        "name": "Set-Cookie",
        "value": "session=eyJfcGVybWFuZW50Ijp0cnVlLCJjc3JmX3Rva2VuIjoiOTIzOWM2ODA4YzI4ZjFhNzRkYzg1ZDViYTk3YTM2NDM3OTJhZTZhZSJ9.aSH66A.-9BizsriA_AVVfiqKl1WN5aP7wA; Expires=Tue, 23 Dec 2025 18:03:20 GMT; HttpOnly; Path=/"
      }
    ],
    "body": {
      "encoding": "utf-8",
      "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Create New Server - Viewer</title>\n\n    <!-- Bootstrap CSS -->\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <!-- Custom CSS -->\n    <link href=\"/static/custom.css\" rel=\"stylesheet\">\n\n    <!-- Font Awesome for icons -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n        <div class=\"container\">\n            <div class=\"viewer-menu dropdown\">\n                <div class=\"btn-group viewer-menu-group\" role=\"group\">\n                    <a class=\"navbar-brand fw-bold viewer-menu-home\" href=\"/\">\n                        <i class=\"fas fa-shield-alt me-2\"></i>Viewer\n                    </a>\n                    <button\n                        class=\"btn btn-link dropdown-toggle dropdown-toggle-split viewer-menu-toggle\"\n                        type=\"button\"\n                        id=\"viewerMenuToggle\"\n                        data-bs-toggle=\"dropdown\"\n                        data-bs-auto-close=\"outside\"\n                        aria-expanded=\"false\"\n                        aria-label=\"Open Viewer navigation menu\"\n                    ></button>\n                    <ul class=\"dropdown-menu shadow\" aria-labelledby=\"viewerMenuToggle\" data-viewer-menu>\n                        <li class=\"dropdown-header text-uppercase small text-muted\">Workspace</li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/uploads\">\n                                <i class=\"fas fa-upload text-muted\"></i>\n                                <span>Uploads</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/server_events\">\n                                <i class=\"fas fa-server text-muted\"></i>\n                                <span>Server Events</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/history\">\n                                <i class=\"fas fa-history text-muted\"></i>\n                                <span>History</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/export\">\n                                <i class=\"fas fa-download text-muted\"></i>\n                                <span>Export Data</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/import\">\n                                <i class=\"fas fa-file-import text-muted\"></i>\n                                <span>Import Data</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/openapi\">\n                                <i class=\"fas fa-book text-muted\"></i>\n                                <span>API Docs</span>\n                            </a>\n                        </li>\n                        <li><hr class=\"dropdown-divider\"></li>\n                        <li class=\"dropdown-submenu dropend\">\n                            <a\n                                class=\"dropdown-item dropdown-toggle d-flex align-items-center gap-2\"\n                                href=\"#\"\n                                role=\"button\"\n                                data-bs-toggle=\"dropdown\"\n                                data-bs-auto-close=\"outside\"\n                                aria-expanded=\"false\"\n                            >\n                                <i class=\"fas fa-link text-muted\"></i>\n                                <span>Aliases</span>\n                            </a>\n                            <ul class=\"dropdown-menu\" data-viewer-aliases>\n                                <li>\n                                    <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/aliases\">\n                                        <i class=\"fas fa-list text-muted\"></i>\n                                        <span>All aliases</span>\n                                    </a>\n                                </li>\n                                <li><hr class=\"dropdown-divider\"></li>\n                                \n                                    \n                                        \n                                        <li>\n                                            \n                                                <a class=\"dropdown-item\" href=\"/aliases/CSS\">CSS</a>\n                                            \n                                        </li>\n                                    \n                                        \n                                        <li>\n                                            \n                                                <a class=\"dropdown-item\" href=\"/aliases/ai\">ai</a>\n                                            \n                                        </li>\n                                    \n                                \n                            </ul>\n                        </li>\n                        <li class=\"dropdown-submenu dropend\">\n                            <a\n                                class=\"dropdown-item dropdown-toggle d-flex align-items-center gap-2\"\n                                href=\"#\"\n                                role=\"button\"\n                                data-bs-toggle=\"dropdown\"\n                                data-bs-auto-close=\"outside\"\n                                aria-expanded=\"false\"\n                            >\n                                <i class=\"fas fa-server text-muted\"></i>\n                                <span>Servers</span>\n                            </a>\n                            <ul class=\"dropdown-menu\" data-viewer-servers>\n                                <li>\n                                    <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/servers\">\n                                        <i class=\"fas fa-list text-muted\"></i>\n                                        <span>All servers</span>\n                                    </a>\n                                </li>\n                                <li><hr class=\"dropdown-divider\"></li>\n                                \n                                    \n                                        \n                                        <li>\n                                            \n                                                <a class=\"dropdown-item\" href=\"/servers/ai_stub\">ai_stub</a>\n                                            \n                                        </li>\n                                    \n                                \n                            </ul>\n                        </li>\n                        <li class=\"dropdown-submenu dropend\">\n                            <a\n                                class=\"dropdown-item dropdown-toggle d-flex align-items-center gap-2\"\n                                href=\"#\"\n                                role=\"button\"\n                                data-bs-toggle=\"dropdown\"\n                                data-bs-auto-close=\"outside\"\n                                aria-expanded=\"false\"\n                            >\n                                <i class=\"fas fa-code text-muted\"></i>\n                                <span>Variables</span>\n                            </a>\n                            <ul class=\"dropdown-menu\" data-viewer-variables>\n                                <li>\n                                    <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/variables\">\n                                        <i class=\"fas fa-list text-muted\"></i>\n                                        <span>All variables</span>\n                                    </a>\n                                </li>\n                                <li><hr class=\"dropdown-divider\"></li>\n                                \n                                    <li>\n                                        <span class=\"dropdown-item-text text-muted small\">No variables yet</span>\n                                    </li>\n                                \n                            </ul>\n                        </li>\n                        <li class=\"dropdown-submenu dropend\">\n                            <a\n                                class=\"dropdown-item dropdown-toggle d-flex align-items-center gap-2\"\n                                href=\"#\"\n                                role=\"button\"\n                                data-bs-toggle=\"dropdown\"\n                                data-bs-auto-close=\"outside\"\n                                aria-expanded=\"false\"\n                            >\n                                <i class=\"fas fa-key text-muted\"></i>\n                                <span>Secrets</span>\n                            </a>\n                            <ul class=\"dropdown-menu\" data-viewer-secrets>\n                                <li>\n                                    <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/secrets\">\n                                        <i class=\"fas fa-list text-muted\"></i>\n                                        <span>All secrets</span>\n                                    </a>\n                                </li>\n                                <li><hr class=\"dropdown-divider\"></li>\n                                \n                                    <li>\n                                        <span class=\"dropdown-item-text text-muted small\">No secrets yet</span>\n                                    </li>\n                                \n                            </ul>\n                        </li>\n                        <li><hr class=\"dropdown-divider\"></li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/routes\">\n                                <i class=\"fas fa-diagram-project text-muted\"></i>\n                                <span>Routes</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/source\">\n                                <i class=\"fas fa-file-code text-muted\"></i>\n                                <span>Source</span>\n                            </a>\n                        </li>\n                        <li><hr class=\"dropdown-divider\"></li>\n                        <li class=\"dropdown-header text-uppercase small text-muted\">Account</li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/profile\">\n                                <i class=\"fas fa-id-badge text-muted\"></i>\n                                <span>Profile</span>\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item d-flex align-items-center gap-2\" href=\"/settings\">\n                                <i class=\"fas fa-sliders-h text-muted\"></i>\n                                <span>Settings</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n                <ul class=\"navbar-nav me-auto align-items-lg-center\">\n                    <li class=\"nav-item\">\n                        <a class=\"nav-link\" href=\"/search\">\n                            <i class=\"fas fa-magnifying-glass me-1\"></i>Search\n                        </a>\n                    </li>\n                </ul>\n\n                <ul class=\"navbar-nav align-items-center\">\n                    <li class=\"nav-item\">\n                        <a\n                            class=\"nav-link text-light\"\n                            href=\"/meta/servers/new.html\"\n                            title=\"View metadata for this page\"\n                            aria-label=\"View metadata for this page\"\n                        >\n                            <i class=\"fas fa-circle-info\"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </nav>\n\n    <!-- Flash Messages -->\n    \n        \n    \n\n    <!-- Main Content -->\n    <main class=\"py-4\">\n        \n\n<div class=\"container-fluid py-4 px-4\">\n    <div class=\"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4\">\n        <h2 class=\"mb-0\"><i class=\"fas fa-server me-2\"></i>Create New Server</h2>\n        <a href=\"/servers\" class=\"btn btn-secondary\">\n            <i class=\"fas fa-arrow-left me-1\"></i>Back to Servers\n        </a>\n    </div>\n\n    <ul class=\"nav nav-tabs\" id=\"server-form-tabs\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link active\" id=\"server-form-definition-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#server-form-definition\" type=\"button\" role=\"tab\" aria-controls=\"server-form-definition\" aria-selected=\"true\">\n                <i class=\"fas fa-pen-to-square me-1\"></i>Definition\n            </button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n            <button class=\"nav-link\" id=\"server-form-docs-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#server-form-docs\" type=\"button\" role=\"tab\" aria-controls=\"server-form-docs\" aria-selected=\"false\">\n                <i class=\"fas fa-book me-1\"></i>Docs\n            </button>\n        </li>\n        \n        \n        \n        \n    </ul>\n\n    <div class=\"tab-content py-4\" id=\"server-form-tabs-content\">\n        <div class=\"tab-pane fade show active\" id=\"server-form-definition\" role=\"tabpanel\" aria-labelledby=\"server-form-definition-tab\">\n            <div class=\"card shadow-sm\">\n                <div class=\"card-header\">\n                    <h5 class=\"card-title mb-0\">Server Configuration</h5>\n                </div>\n                <div class=\"card-body\">\n                    <form method=\"POST\" class=\"row g-4\">\n                        <input id=\"csrf_token\" name=\"csrf_token\" type=\"hidden\" value=\"IjkyMzljNjgwOGMyOGYxYTc0ZGM4NWQ1YmE5N2EzNjQzNzkyYWU2YWUi.aSH66A.O4qqwoILemWsGcv-iUHbpw4PadA\">\n                        <div class=\"col-12\">\n                            <label class=\"form-label\" for=\"name\">Server Name</label>\n                            <div\n                                class=\"d-flex flex-wrap align-items-start gap-2\"\n                                data-rename-control\n                                data-name-field=\"name\"\n                                data-original-name=\"\"\n                                data-rename-template=\"Rename to __name__\"\n                                data-save-as-template=\"Save As __name__\"\n                                data-name-pattern=\"^[a-zA-Z0-9._-]+$\"\n                            >\n                                <div class=\"flex-grow-1\">\n                                    <input class=\"form-control\" id=\"name\" name=\"name\" required type=\"text\" value=\"\">\n                                    \n                                        <div class=\"form-text\">\n                                            Server name can only contain letters, numbers, dots, hyphens, and underscores. This will be used in URLs.\n                                        </div>\n                                    \n                                </div>\n                                <div class=\"d-flex flex-column gap-2 align-items-start\">\n                                    <div class=\"d-flex gap-2 flex-wrap\">\n                                        <input class=\"btn btn-primary\" data-default-label=\"Save Server\" data-primary-save=\"true\" id=\"submit\" name=\"submit\" type=\"submit\" value=\"Save Server\">\n                                        <button\n                                            type=\"submit\"\n                                            name=\"submit_action\"\n                                            value=\"save-as\"\n                                            class=\"btn btn-outline-primary d-none\"\n                                            data-save-as-button\n                                            data-default-label=\"Save As\"\n                                        >\n                                            Save As\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \n\n                        \n\n                        \n                        <div class=\"col-12\">\n                            <div class=\"d-flex align-items-center gap-2\">\n                                <i class=\"fas fa-cog text-muted\"></i>\n                                <a href=\"/variables/templates?type=servers\" class=\"template-status-empty\">\n                                    No templates\n                                </a>\n                            </div>\n                        </div>\n                        \n\n                        <div class=\"col-12\">\n                            <label class=\"form-label\" for=\"definition\">Server Definition</label>\n                            <div class=\"position-relative\">\n                                <textarea class=\"form-control\" id=\"definition\" name=\"definition\" required rows=\"15\" style=\"font-family: monospace;\">\r\n</textarea>\n                                <div\n                                    id=\"server-definition-editor\"\n                                    class=\"form-control p-0 server-definition-editor code-editor d-none\"\n                                    data-editor-language=\"python\"\n                                ></div>\n                            </div>\n                            <input type=\"hidden\" id=\"server-definition-validate-url\" value=\"/servers/validate-definition\">\n                            \n                                <div class=\"form-text\">\n                                    Enter the server configuration or definition. This can be any text content you want to associate with this server.\n                                </div>\n                            \n                            <div id=\"server-definition-errors\" class=\"alert alert-danger mt-3 d-none\" role=\"alert\"></div>\n                        </div>\n\n                        <div class=\"col-12\">\n                            <div class=\"row g-3\">\n                                <div class=\"col-12 col-lg-6\">\n                                    <div class=\"form-check form-switch\">\n                                        <input checked class=\"form-check-input\" id=\"enabled\" name=\"enabled\" role=\"switch\" type=\"checkbox\" value=\"y\">\n                                        <label class=\"form-check-label\" for=\"enabled\">Enabled</label>\n                                        <div class=\"form-text\">Disable a server to keep its definition without allowing execution.</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"col-12 d-flex flex-wrap justify-content-between align-items-center gap-2\">\n                            <a href=\"/servers\" class=\"btn btn-secondary\">\n                                <i class=\"fas fa-times me-1\"></i>Cancel\n                            </a>\n                            <div class=\"d-flex gap-2 flex-wrap\">\n                                \n    \n    \n        \n    \n    <button type=\"button\"\n            class=\"btn btn-outline-primary\"\n            data-ai-trigger\n            data-ai-target-id=\"definition\">\n        <i class=\"fas fa-robot me-1\"></i>AI\n    </button>\n\n                            </div>\n                        </div>\n\n                        <div class=\"col-12 mt-3\">\n                            \n    \n    \n    \n    <div class=\"mb-3 ai-text-assistant\"\n         data-ai-target-id=\"definition\"\n         data-ai-target-label=\"server definition\"\n         data-ai-history-limit=\"10\"\n         data-ai-entity-type=\"server\"\n         \n         data-ai-entity-name-field=\"name\"\n         data-ai-context='{\"form\": \"server_form\"}'>\n        <label for=\"definition-ai-input\" class=\"form-label\">Ask AI to edit the server definition</label>\n        <textarea id=\"definition-ai-input\"\n                  class=\"form-control\"\n                  rows=\"3\"\n                  data-ai-input\n                  placeholder=\"Share instructions for AI or summarise manual edits to the server definition.\"></textarea>\n        <div class=\"form-text\">Describe how the AI should adjust the server definition before saving.</div>\n        <input type=\"hidden\" name=\"change_message\" data-change-message-store>\n        <div class=\"alert alert-info d-none mt-3\"\n             id=\"definition-ai-output\"\n             data-ai-output\n             role=\"status\"></div>\n        <div class=\"mt-3\">\n            <label class=\"form-label small text-uppercase fw-semibold\">Recent edits and requests</label>\n            <div class=\"list-group list-group-flush border rounded\" data-ai-history-list>\n                \n            </div>\n            <div class=\"text-muted small mt-2 \" data-ai-history-empty>\n                No interactions yet.\n            </div>\n        </div>\n    </div>\n\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"tab-pane fade\" id=\"server-form-docs\" role=\"tabpanel\" aria-labelledby=\"server-form-docs-tab\">\n            <div class=\"card shadow-sm\">\n    <div class=\"card-header\">\n        <h5 class=\"card-title mb-0\"><i class=\"fas fa-book me-2\"></i>Server authoring reference</h5>\n    </div>\n    <div class=\"card-body\">\n        <p class=\"mb-3\">\n            Server definitions run as Python modules executed by\n            <a href=\"/source/server_execution.py\" class=\"text-decoration-none\">server_execution.py</a>.\n            When a <code>main()</code> function is present, Viewer automatically maps request data into its\n            parameters so the handler can focus on rendering a response.\n        </p>\n        <p class=\"mb-3\">\n            Parameters are populated in priority order from the query string, JSON or form body, HTTP headers\n            (hyphen/underscore normalised), explicit invocation arguments, saved variables, then saved secrets.\n            Missing required parameters receive a JSON 400 response describing how to provide each value.\n            When an auto-main server only needs a single value, the segment immediately following its name in the URL can also\n            satisfy that parameter by resolving another server, alias, or CID before invoking the outer server (for example,\n            <code>/outer/&lt;nested-server&gt;</code> runs the nested server first and passes its output to <code>outer</code>).\n        </p>\n        <p class=\"mb-3\">\n            If a server has multiple parameters, Viewer attempts to resolve as many values as possible using the usual sources.\n            When exactly one parameter remains unresolved, that final value is filled using the next URL segment with the same\n            nested server/alias/CID lookup rules described above. If more than one parameter is still missing after these\n            lookups, Viewer renders an HTML 400 page describing every supplied and missing parameter to help debug the request.\n        </p>\n        <p class=\"mb-3\">\n            The return value can be a dictionary with <code>output</code> and <code>content_type</code>, a tuple of\n            <code>(output, content_type)</code>, or any other value which is sent as HTML. The execution layer stores the\n            rendered payload as a CID and redirects the caller to that resource. Helper functions can be invoked by\n            appending their name to the server URL when their signatures pass validation. Tested reference examples live in\n            <a href=\"/source/reference_templates/servers/definitions\" class=\"text-decoration-none\">reference_templates/servers/definitions</a>.\n        </p>\n        <p class=\"mb-2\">Key automated checks covering this behaviour:</p>\n        <ul class=\"mb-3\">\n            <li>\n                <a href=\"/source/tests/test_server_auto_main.py\" class=\"text-decoration-none\">tests/test_server_auto_main.py</a>\n                exercises auto-mapped parameters, helper execution, and error handling.\n            </li>\n            <li>\n                <a href=\"/source/tests/test_server_execution_output_encoding.py\" class=\"text-decoration-none\">tests/test_server_execution_output_encoding.py</a>\n                ensures return values are encoded, logged, and redirected consistently.\n            </li>\n            <li>\n                <a href=\"/source/tests/integration/test_server_pages.py\" class=\"text-decoration-none\">tests/integration/test_server_pages.py</a>\n                verifies the UI surfaces server metadata, history snapshots, and invocation records.\n            </li>\n        </ul>\n        <p class=\"mb-0\">\n            For a broader catalogue of coverage, see the cross references in\n            <a href=\"/source/docs/page_test_cross_reference.md\" class=\"text-decoration-none\">docs/page_test_cross_reference.md</a>\n            and the index entries in\n            <a href=\"/source/TEST_INDEX.md\" class=\"text-decoration-none\">TEST_INDEX.md</a>.\n        </p>\n    </div>\n</div>\n        </div>\n\n        \n\n        \n\n        \n\n        \n    </div>\n</div>\n\n<script>\nfunction loadHistoricalDefinition(index) {\n    const definitionElement = document.querySelector(`#definition-${index} .historical-definition`);\n    if (!definitionElement) {\n        return;\n    }\n\n    const definition = definitionElement.textContent;\n    const textarea = document.getElementById('definition');\n    const editor = window.serverDefinitionEditor;\n\n    if (!definition || (!textarea && !(editor && typeof editor.setValue === 'function'))) {\n        return;\n    }\n\n    if (!confirm('This will replace the current definition in the editor. Are you sure?')) {\n        return;\n    }\n\n    if (editor && typeof editor.setValue === 'function') {\n        editor.setValue(definition);\n        if (typeof editor.focus === 'function') {\n            editor.focus();\n        }\n        if (typeof editor.scrollIntoView === 'function') {\n            editor.scrollIntoView();\n        }\n    } else if (textarea) {\n        textarea.value = definition;\n        textarea.dispatchEvent(new Event('input', { bubbles: true }));\n        textarea.scrollIntoView({ behavior: 'smooth' });\n        textarea.focus();\n    }\n\n    const currentEvent = window.event;\n    const button = currentEvent && currentEvent.target ? currentEvent.target.closest('button') : null;\n    if (!button) {\n        return;\n    }\n\n    const originalContent = button.innerHTML;\n    button.innerHTML = '<i class=\"fas fa-check text-success\"></i> Loaded!';\n    setTimeout(() => {\n        button.innerHTML = originalContent;\n    }, 2000);\n}\n</script>\n\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"bg-dark text-light py-4 mt-5\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <h5>Viewer</h5>\n                    <p class=\"text-muted\">Secure content management platform</p>\n                </div>\n                <div class=\"col-md-6 text-md-end\">\n                    <span class=\"text-light text-decoration-none\">User management is handled externally.</span>\n                </div>\n            </div>\n            <hr class=\"my-3\">\n            <div class=\"text-center text-muted\">\n                <small>&copy; 2025 Viewer. All rights reserved.</small>\n            </div>\n        </div>\n    </footer>\n\n    <!-- Bootstrap JS -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n\n    <script src=\"/static/js/ai_assistant.js\"></script>\n\n    <script>\n    document.addEventListener('click', function (event) {\n        const trigger = event.target.closest('.cid-copy-action');\n        if (!trigger) {\n            return;\n        }\n\n        event.preventDefault();\n\n        const copyPath = trigger.getAttribute('data-copy-path');\n        if (!copyPath) {\n            return;\n        }\n\n        const originalHtml = trigger.innerHTML;\n\n        navigator.clipboard.writeText(`${window.location.origin}${copyPath}`).then(() => {\n            trigger.innerHTML = '<i class=\"fas fa-check text-success me-2\"></i>Copied!';\n            trigger.classList.add('disabled');\n\n            const dropdownToggle = trigger.closest('.dropdown')?.querySelector('[data-bs-toggle=\"dropdown\"]');\n            if (dropdownToggle && window.bootstrap && window.bootstrap.Dropdown) {\n                const dropdownInstance = window.bootstrap.Dropdown.getInstance(dropdownToggle) || new window.bootstrap.Dropdown(dropdownToggle);\n                dropdownInstance.hide();\n            }\n\n            setTimeout(() => {\n                trigger.innerHTML = originalHtml;\n                trigger.classList.remove('disabled');\n            }, 2000);\n        }).catch(() => {\n            trigger.innerHTML = '<i class=\"fas fa-exclamation-triangle text-danger me-2\"></i>Copy failed';\n            setTimeout(() => {\n                trigger.innerHTML = originalHtml;\n            }, 2000);\n        });\n    });\n    </script>\n\n    \n    \n    <script src=\"https://cdn.jsdelivr.net/npm/ace-builds@1.32.6/src-min-noconflict/ace.js\"></script>\n    <script src=\"/static/js/rename_controls.js\"></script>\n    <script src=\"/static/js/server_form.js\"></script>\n    \n\n</body>\n</html>"
    }
  },
  "screenshot": {
    "captured": false,
    "placeholder": true,
    "asset": "no-screenshot-available.png",
    "details": [
      "MaxRetryError: HTTPSConnectionPool(host='storage.googleapis.com', port=443): Max retries exceeded with url: /chromium-browser-snapshots/Linux_x64/588429/chrome-linux.zip (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1000)')))"
    ]
  }
}