#!/usr/bin/env bash
cd "$(dirname "$0")"

echo "Setting up SecureApp..."

if ! command -v python3 >/dev/null 2>&1; then
  echo "Python 3 is required. https://www.python.org/downloads/"
  exit 1
fi

if [ ! -d "venv" ]; then
  python3 -m venv venv
fi

source venv/bin/activate

python -m pip install --upgrade pip
python -m pip install -r requirements.txt

if [ ! -f ".env" ]; then
  cp .env.sample .env
  echo "Created .env from .env.sample. Update it with your settings."
fi

chmod +x install run doctor

echo "Installation finished. Use ./doctor to verify and ./run to start the app."
echo "Configure LOGFIRE_* and LANGSMITH_* values in .env to enable observability links."
