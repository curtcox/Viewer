{
  "label": "GET /AAAAAEg-2Wf7I4KfICfvO5KWcrNGkbwri5ngqXg00tB3pB3G4GdJZz0AxejuobKAQ7P--I4xb0L2MLiiAzWNmFwl23gV4g.html",
  "captured_at": "2026-01-22T00:33:05Z",
  "preview": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>AI Request Editor</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap\" rel=\"stylesheet\">\n    <style>\nbody {\n    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;\n    background-color: #f6f7fb;\n}\n\n#ai-editor-root .card {\n    border-radius: 12px;\n}\n\n.nav-tabs .nav-link {\n    border: none;\n    color: #6c757d;\n    font-weight: 600;\n}\n\n.nav-tabs .nav-link.active {\n    color: #0d6efd;\n    border-bottom: 2px solid #0d6efd;\n}\n\ntextarea {\n    resize: vertical;\n}\n\n.endpoint-input {\n    min-width: 280px;\n}\n\n[data-ai-response] {\n    min-height: 140px;\n    white-space: pre-wrap;\n}\n\n[data-ai-response] pre {\n    background: transparent;\n    margin: 0;\n    padding: 0;\n}\n\n.card-header h2 {\n    font-weight: 700;\n}\n\n.card-header p {\n    margin-top: 0.25rem;\n}\n\n[data-ai-sta",
  "request": {
    "method": "GET",
    "path": "/AAAAAEg-2Wf7I4KfICfvO5KWcrNGkbwri5ngqXg00tB3pB3G4GdJZz0AxejuobKAQ7P--I4xb0L2MLiiAzWNmFwl23gV4g.html?",
    "url": "http://localhost/AAAAAEg-2Wf7I4KfICfvO5KWcrNGkbwri5ngqXg00tB3pB3G4GdJZz0AxejuobKAQ7P--I4xb0L2MLiiAzWNmFwl23gV4g.html",
    "headers": [
      {
        "name": "User-Agent",
        "value": "Werkzeug/3.1.5"
      },
      {
        "name": "Host",
        "value": "localhost"
      },
      {
        "name": "Cookie",
        "value": "session=eyJfcGVybWFuZW50Ijp0cnVlfQ.aXFwQQ.dhjVBCAI-0UtprZ5wYFa_Zp8Jr8"
      }
    ],
    "query": {},
    "body": {
      "encoding": "utf-8",
      "text": ""
    }
  },
  "response": {
    "status_code": 200,
    "mimetype": "text/html",
    "headers": [
      {
        "name": "Content-Type",
        "value": "text/html"
      },
      {
        "name": "Content-Length",
        "value": "18494"
      },
      {
        "name": "ETag",
        "value": "\"AAAAAEg-2Wf7I4KfICfvO5KWcrNGkbwri5ngqXg00tB3pB3G4GdJZz0AxejuobKAQ7P--I4xb0L2MLiiAzWNmFwl23gV4g\""
      },
      {
        "name": "Last-Modified",
        "value": "Thu, 22 Jan 2026 00:33:05 GMT"
      },
      {
        "name": "Cache-Control",
        "value": "public, max-age=31536000, immutable"
      },
      {
        "name": "Expires",
        "value": "Thu, 31 Dec 2037 23:55:55 GMT"
      },
      {
        "name": "Vary",
        "value": "Cookie"
      },
      {
        "name": "Set-Cookie",
        "value": "session=eyJfcGVybWFuZW50Ijp0cnVlfQ.aXFwQQ.dhjVBCAI-0UtprZ5wYFa_Zp8Jr8; Expires=Sun, 22 Feb 2026 00:33:05 GMT; HttpOnly; Path=/"
      }
    ],
    "body": {
      "encoding": "utf-8",
      "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>AI Request Editor</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap\" rel=\"stylesheet\">\n    <style>\nbody {\n    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;\n    background-color: #f6f7fb;\n}\n\n#ai-editor-root .card {\n    border-radius: 12px;\n}\n\n.nav-tabs .nav-link {\n    border: none;\n    color: #6c757d;\n    font-weight: 600;\n}\n\n.nav-tabs .nav-link.active {\n    color: #0d6efd;\n    border-bottom: 2px solid #0d6efd;\n}\n\ntextarea {\n    resize: vertical;\n}\n\n.endpoint-input {\n    min-width: 280px;\n}\n\n[data-ai-response] {\n    min-height: 140px;\n    white-space: pre-wrap;\n}\n\n[data-ai-response] pre {\n    background: transparent;\n    margin: 0;\n    padding: 0;\n}\n\n.card-header h2 {\n    font-weight: 700;\n}\n\n.card-header p {\n    margin-top: 0.25rem;\n}\n\n[data-ai-status-wrapper] .spinner-border {\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n.font-monospace {\n    font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n}\n\n</style>\n</head>\n<body>\n<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <div class=\"container\">\n        <a class=\"navbar-brand fw-bold\" href=\"/\">\n            <i class=\"fas fa-shield-alt me-2\"></i>Viewer\n        </a>\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n            <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul class=\"navbar-nav me-auto align-items-lg-center\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" href=\"/search\">\n                        <i class=\"fas fa-magnifying-glass me-1\"></i>Search\n                    </a>\n                </li>\n            </ul>\n            <ul class=\"navbar-nav align-items-center\">\n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link text-light dropdown-toggle d-flex align-items-center\" href=\"#\" id=\"pageInfoMenu\"\n                       role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" title=\"Page information and logs\"\n                       aria-label=\"Page information and logs\">\n                        <i class=\"fas fa-circle-info\"></i>\n                    </a>\n                    <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"pageInfoMenu\">\n                        <li>\n                            <a class=\"dropdown-item\" data-meta-link href=\"/meta/ai_editor.html\">\n                                About this page\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item\" data-history-link href=\"/history?start=2026%2F01%2F22+00%3A33%3A00\">\n                                History\n                            </a>\n                        </li>\n                        <li>\n                            <a class=\"dropdown-item\" data-server-events-link href=\"/server_events?start=2026%2F01%2F22+00%3A33%3A00\">\n                                Server Events\n                            </a>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n</nav>\n\n<main class=\"container py-4\" id=\"ai-editor-root\" data-initial-payload=\"{&quot;request_text&quot;: &quot;&quot;, &quot;original_text&quot;: &quot;&quot;, &quot;target_label&quot;: &quot;&quot;, &quot;context_data&quot;: {}, &quot;form_summary&quot;: {}}\" data-target-endpoint=\"/ai\">\n    <div class=\"d-flex flex-column flex-lg-row justify-content-between align-items-lg-center mb-4 gap-3\">\n        <div>\n            <h1 class=\"h3 mb-1\">AI request editor</h1>\n            <p class=\"text-muted mb-0\">Inspect, adjust, and resubmit AI requests without losing form context.</p>\n        </div>\n        <div class=\"endpoint-input\">\n            <label class=\"form-label small text-uppercase fw-semibold\">Target endpoint</label>\n            <input type=\"text\" class=\"form-control\" data-ai-target-endpoint placeholder=\"/ai\">\n            <div class=\"form-text\">Choose where the edited request will be sent.</div>\n        </div>\n    </div>\n\n    <form class=\"card shadow-sm\" data-ai-editor-form>\n        <div class=\"card-header bg-white border-0 pb-0\">\n            <ul class=\"nav nav-tabs\" id=\"aiEditorTabs\" role=\"tablist\">\n                <li class=\"nav-item\" role=\"presentation\">\n                    <button class=\"nav-link active\" id=\"request-text-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#request-text-pane\" type=\"button\" role=\"tab\">request_text</button>\n                </li>\n                <li class=\"nav-item\" role=\"presentation\">\n                    <button class=\"nav-link\" id=\"original-text-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#original-text-pane\" type=\"button\" role=\"tab\">original_text</button>\n                </li>\n                <li class=\"nav-item\" role=\"presentation\">\n                    <button class=\"nav-link\" id=\"target-label-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#target-label-pane\" type=\"button\" role=\"tab\">target_label</button>\n                </li>\n                <li class=\"nav-item\" role=\"presentation\">\n                    <button class=\"nav-link\" id=\"context-data-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#context-data-pane\" type=\"button\" role=\"tab\">context_data</button>\n                </li>\n                <li class=\"nav-item\" role=\"presentation\">\n                    <button class=\"nav-link\" id=\"form-summary-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#form-summary-pane\" type=\"button\" role=\"tab\">form_summary</button>\n                </li>\n            </ul>\n        </div>\n        <div class=\"card-body\">\n            <div class=\"tab-content\">\n                <div class=\"tab-pane fade show active\" id=\"request-text-pane\" role=\"tabpanel\">\n                    <label class=\"form-label\">AI request text</label>\n                    <textarea class=\"form-control\" rows=\"6\" data-ai-field=\"request_text\" placeholder=\"Describe the AI change or ask a question.\"></textarea>\n                </div>\n                <div class=\"tab-pane fade\" id=\"original-text-pane\" role=\"tabpanel\">\n                    <label class=\"form-label\">Original text</label>\n                    <textarea class=\"form-control\" rows=\"6\" data-ai-field=\"original_text\" placeholder=\"The text the AI will modify.\"></textarea>\n                </div>\n                <div class=\"tab-pane fade\" id=\"target-label-pane\" role=\"tabpanel\">\n                    <label class=\"form-label\">Target label</label>\n                    <textarea class=\"form-control\" rows=\"3\" data-ai-field=\"target_label\" placeholder=\"How this text is described in the UI.\"></textarea>\n                </div>\n                <div class=\"tab-pane fade\" id=\"context-data-pane\" role=\"tabpanel\">\n                    <label class=\"form-label\">Context data (JSON)</label>\n                    <textarea class=\"form-control font-monospace\" rows=\"8\" data-ai-field=\"context_data\" placeholder=\"{}\"></textarea>\n                    <div class=\"form-text\">Supplied alongside the request for additional context.</div>\n                </div>\n                <div class=\"tab-pane fade\" id=\"form-summary-pane\" role=\"tabpanel\">\n                    <label class=\"form-label\">Form summary (JSON)</label>\n                    <textarea class=\"form-control font-monospace\" rows=\"8\" data-ai-field=\"form_summary\" placeholder=\"{}\"></textarea>\n                    <div class=\"form-text\">Captured form fields at the time the AI button was used.</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"card-footer bg-white d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3\">\n            <div class=\"d-flex align-items-center gap-2\" data-ai-status-wrapper>\n                <div class=\"spinner-border text-primary d-none\" role=\"status\" aria-hidden=\"true\" data-ai-spinner></div>\n                <div class=\"text-muted small\" data-ai-status>Ready to submit</div>\n            </div>\n            <div class=\"btn-group\" role=\"group\">\n                <button type=\"button\" class=\"btn btn-primary\" data-ai-editor-submit>\n                    <i class=\"fas fa-robot me-1\"></i>AI\n                </button>\n                <button type=\"button\" class=\"btn btn-primary dropdown-toggle dropdown-toggle-split\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" aria-label=\"AI options\">\n                    <span class=\"visually-hidden\">AI options</span>\n                </button>\n                <ul class=\"dropdown-menu dropdown-menu-end\">\n                    <li><span class=\"dropdown-item-text text-muted\">AI request editor</span></li>\n                    <li><a class=\"dropdown-item\" href=\"/aliases/ai\">AI action editor</a></li>\n                    <li><a class=\"dropdown-item\" href=\"/servers/ai_stub\">Sample AI server</a></li>\n                    <li><a class=\"dropdown-item\" href=\"/ai_about\">About AI</a></li>\n                </ul>\n            </div>\n        </div>\n    </form>\n\n    <section class=\"mt-4\">\n        <div class=\"card shadow-sm\">\n            <div class=\"card-header bg-white d-flex justify-content-between align-items-center\">\n                <div>\n                    <h2 class=\"h6 mb-0\">AI response</h2>\n                    <p class=\"text-muted small mb-0\">Responses are shown here without reloading the page.</p>\n                </div>\n                <div class=\"text-muted small\" data-ai-endpoint-indicator>Target: /ai</div>\n            </div>\n            <div class=\"card-body bg-light\" data-ai-response>\n                <div class=\"text-muted\">No response yet. Submit to see results.</div>\n            </div>\n        </div>\n    </section>\n</main>\n\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n<script>\n    window.AI_EDITOR_BOOTSTRAP = {\n        payload: {\"request_text\": \"\", \"original_text\": \"\", \"target_label\": \"\", \"context_data\": {}, \"form_summary\": {}},\n        targetEndpoint: \"/ai\",\n        metaInspectorUrl: \"/meta/ai_editor.html\",\n        historySinceUrl: \"/history?start=2026%2F01%2F22+00%3A33%3A00\",\n        serverEventsSinceUrl: \"/server_events?start=2026%2F01%2F22+00%3A33%3A00\"\n    };\n</script>\n<script>\n(function () {\n    function $(selector) {\n        return document.querySelector(selector);\n    }\n\n    function setText(element, text) {\n        if (!element) {\n            return;\n        }\n        element.textContent = text;\n    }\n\n    function formatForEditor(value, fallback) {\n        if (value === undefined || value === null) {\n            return fallback;\n        }\n        if (typeof value === 'object') {\n            try {\n                return JSON.stringify(value, null, 2);\n            } catch (error) {\n                return fallback;\n            }\n        }\n        return String(value);\n    }\n\n    function parseJsonField(text, fallback) {\n        if (typeof text !== 'string') {\n            return fallback;\n        }\n        var trimmed = text.trim();\n        if (!trimmed) {\n            return fallback;\n        }\n        try {\n            return JSON.parse(trimmed);\n        } catch (error) {\n            throw new Error('Invalid JSON: ' + error.message);\n        }\n    }\n\n    function buildPayload(fields) {\n        return {\n            request_text: fields.requestText.value || '',\n            original_text: fields.originalText.value || '',\n            target_label: fields.targetLabel.value || '',\n            context_data: parseJsonField(fields.contextData.value, {}),\n            form_summary: parseJsonField(fields.formSummary.value, {}),\n        };\n    }\n\n    function renderResponse(target, data) {\n        if (!target) {\n            return;\n        }\n        target.innerHTML = '';\n        var pre = document.createElement('pre');\n        if (typeof data === 'string') {\n            pre.textContent = data;\n        } else {\n            try {\n                pre.textContent = JSON.stringify(data, null, 2);\n            } catch (error) {\n                pre.textContent = String(data);\n            }\n        }\n        target.appendChild(pre);\n    }\n\n    function setActiveEndpointIndicator(element, endpoint) {\n        if (element) {\n            element.textContent = 'Target: ' + (endpoint || '/ai');\n        }\n    }\n\n    function initialiseTabs() {\n        var firstTab = document.querySelector('#aiEditorTabs .nav-link');\n        if (firstTab) {\n            firstTab.classList.add('active');\n        }\n    }\n\n    document.addEventListener('DOMContentLoaded', function () {\n        var config = window.AI_EDITOR_BOOTSTRAP || {};\n        var payload = config.payload || {};\n        var targetEndpoint = config.targetEndpoint || '/ai';\n\n        var root = document.getElementById('ai-editor-root');\n        if (root) {\n            var rootPayload = root.getAttribute('data-initial-payload');\n            if (!payload && rootPayload) {\n                try {\n                    payload = JSON.parse(rootPayload);\n                } catch (error) {\n                    payload = {};\n                }\n            }\n            var rootTarget = root.getAttribute('data-target-endpoint');\n            if (!targetEndpoint && rootTarget) {\n                targetEndpoint = rootTarget;\n            }\n        }\n\n        var fields = {\n            requestText: document.querySelector('[data-ai-field=\"request_text\"]'),\n            originalText: document.querySelector('[data-ai-field=\"original_text\"]'),\n            targetLabel: document.querySelector('[data-ai-field=\"target_label\"]'),\n            contextData: document.querySelector('[data-ai-field=\"context_data\"]'),\n            formSummary: document.querySelector('[data-ai-field=\"form_summary\"]'),\n        };\n\n        fields.requestText.value = formatForEditor(payload.request_text, '');\n        fields.originalText.value = formatForEditor(payload.original_text, '');\n        fields.targetLabel.value = formatForEditor(payload.target_label, '');\n        fields.contextData.value = formatForEditor(payload.context_data, '{}');\n        fields.formSummary.value = formatForEditor(payload.form_summary, '{}');\n\n        var endpointInput = document.querySelector('[data-ai-target-endpoint]');\n        if (endpointInput) {\n            endpointInput.value = targetEndpoint || '/ai';\n        }\n\n        var responseTarget = document.querySelector('[data-ai-response]');\n        var statusTarget = document.querySelector('[data-ai-status]');\n        var spinner = document.querySelector('[data-ai-spinner]');\n        var endpointIndicator = document.querySelector('[data-ai-endpoint-indicator]');\n\n        setActiveEndpointIndicator(endpointIndicator, targetEndpoint);\n\n        function updateStatus(message, isError) {\n            if (!statusTarget) {\n                return;\n            }\n            statusTarget.classList.toggle('text-danger', !!isError);\n            statusTarget.classList.toggle('text-muted', !isError);\n            setText(statusTarget, message);\n        }\n\n        function toggleLoading(isLoading) {\n            if (spinner) {\n                spinner.classList.toggle('d-none', !isLoading);\n            }\n        }\n\n        function handleError(error) {\n            toggleLoading(false);\n            updateStatus(error.message || 'Unable to submit request', true);\n        }\n\n        function handleSuccess(data) {\n            toggleLoading(false);\n            updateStatus('Response received', false);\n            renderResponse(responseTarget, data);\n        }\n\n        function submitRequest() {\n            if (!endpointInput) {\n                return;\n            }\n            var endpoint = endpointInput.value || '/ai';\n            setActiveEndpointIndicator(endpointIndicator, endpoint);\n\n            var payloadForRequest;\n            try {\n                payloadForRequest = buildPayload(fields);\n            } catch (error) {\n                handleError(error);\n                return;\n            }\n\n            toggleLoading(true);\n            updateStatus('Submitting...', false);\n\n            fetch(endpoint, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                credentials: 'same-origin',\n                body: JSON.stringify(payloadForRequest)\n            }).then(function (response) {\n                if (!response.ok) {\n                    return response.text().then(function (text) {\n                        throw new Error(text || response.statusText);\n                    });\n                }\n                return response.json().catch(function () {\n                    return response.text();\n                });\n            }).then(function (data) {\n                handleSuccess(data);\n            }).catch(function (error) {\n                handleError(error);\n            });\n        }\n\n        var form = document.querySelector('[data-ai-editor-form]');\n        if (form) {\n            form.addEventListener('submit', function (event) {\n                event.preventDefault();\n                submitRequest();\n            });\n        }\n\n        var aiButton = document.querySelector('[data-ai-editor-submit]');\n        if (aiButton) {\n            aiButton.addEventListener('click', function () {\n                submitRequest();\n            });\n        }\n\n        if (config.metaInspectorUrl) {\n            var metaLink = document.querySelector('[data-meta-link]');\n            if (metaLink) {\n                metaLink.href = config.metaInspectorUrl;\n            }\n        }\n        if (config.historySinceUrl) {\n            var historyLink = document.querySelector('[data-history-link]');\n            if (historyLink) {\n                historyLink.href = config.historySinceUrl;\n            }\n        }\n        if (config.serverEventsSinceUrl) {\n            var serverEventsLink = document.querySelector('[data-server-events-link]');\n            if (serverEventsLink) {\n                serverEventsLink.href = config.serverEventsSinceUrl;\n            }\n        }\n\n        initialiseTabs();\n    });\n})();\n\n</script>\n</body>\n</html>\n"
    }
  },
  "screenshot": {
    "captured": true,
    "placeholder": false
  }
}